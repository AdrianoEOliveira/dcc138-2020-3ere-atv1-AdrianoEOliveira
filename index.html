<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste 01</title>
</head>
<body>
    <h1>Teste 01</h1>
    <canvas></canvas>
    <script>
        let canvas = document.querySelector("canvas");
        let ctx = canvas.getContext("2d");
        canvas.width=640;
        canvas.height= 500;
        let t0;
        let dt;
        let V=150;

        let p = {
            x : 100,
            ax : 0,
            vx : 0,
            y : 100,
            ay : 0,
            vy : 0,
        }

        let e = {
            x: 300,
            ax: 0,
            vx: 0,
            y : 300,
            ay : 0,
            vy : 0,
        }

        requestAnimationFrame(desenha);
        function desenha(t)
        {
            if(t0=== undefined) t0 =t;
            dt=(t-t0)/1000;
            //desenha fundo;
            ctx.fillStyle="Blue";
            ctx.fillRect(0,0,canvas.width,canvas.height);

            //Controladores
            e.ay = ((p.y - e.y)*0.5) - 0.2*e.vy;
            e.ax = ((p.x - e.x)*0.5) - 0.2*e.vx;
            
            //atualiza din√¢mica dos elementos
            p.vx = p.vx + p.(ax*dt);
            p.x = p.x + p.vx*dt;
            p.vy = p.vy+ (p.ay*dt);
            p.y = p.y + p.vy*dt;

            e.vx = e.vx + (e.ax*dt);
            e.x = e.x + e.vx*dt;
            e.vy = e.vy+ (e.ay*dt);
            e.y = e.y + e.vy*dt;

            //desenha elementos;
            ctx.fillStyle="white";
            ctx.fillRect(p.x,p.y,30,30);

            ctx.fillStyle="red";
            ctx.fillRect(e.x,e.y,30,30);

            requestAnimationFrame(desenha);
            t0=t;
        }
        addEventListener("keydown",teclaPressionada);
        addEventListener("keyup",teclaSolta);
        function teclaPressionada(event)
        {
            //Controle de velocidades
            console.log(event.key);
            switch (event.key) 
            {
                case "ArrowUp":
                    p.ay = -V;
                    break;
                case "ArrowDown":
                    p.ay = +V;
                    break;
                case "ArrowLeft":
                    p.ax = -V;
                    break;
                case "ArrowRight":
                    p.ax = +V;
                    break;
            
                default:
                    break;
            }
        }
        function teclaSolta(event)
        {
            //Controle de velocidades
            console.log(event.key);
            switch (event.key) 
            {
                case "ArrowUp":
                    p.vy = 0;
                    p.ay = 0;
                    break;
                case "ArrowDown":
                    p.vy = 0;
                    p.ay = 0;
                    break;
                case "ArrowLeft":
                    p.vx = 0;
                    p.ax = 0;
                    break;
                case "ArrowRight":
                    p.vx = 0;
                    p.ax = 0;
                    break;
            
                default:
                    break;
            }
        }
    </script>
</body>
</html>