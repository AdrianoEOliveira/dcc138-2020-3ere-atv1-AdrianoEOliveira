<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste 01</title>
</head>
<body>
    <h1>Teste 01</h1>
    <canvas></canvas>
    <script>
        let canvas = document.querySelector("canvas");
        let ctx = canvas.getContext("2d");
        canvas.width=640;
        canvas.height= 500;
        let t0;
        let dt;

        let p = {

        x : 100,
        ax : 0,
        vx : 0,
        y : 100,
        ay : 0,
        vy : 0,
        }

        let V=150;

        let ex = 300;
        let eax = 0;
        let evx = 0;
        let ey = 300;
        let eay = 0;
        let evy = 0;

        requestAnimationFrame(desenha);
        function desenha(t)
        {
            if(t0=== undefined) t0 =t;
            dt=(t-t0)/1000;
            //desenha fundo;
            ctx.fillStyle="Blue";
            ctx.fillRect(0,0,canvas.width,canvas.height);

            //Controladores
            eay = ((p.y - ey)*0.5) - 0.2*evy;
            eax = ((p.x - ex)*0.5) - 0.2*evx;
            
            //atualiza din√¢mica dos elementos
            p.vx = p.vx + p.(ax*dt);
            p.x = p.x + p.vx*dt;
            p.vy = p.vy+ (p.ay*dt);
            p.y = p.y + p.vy*dt;

            evx = evx + (eax*dt);
            ex = ex + evx*dt;
            evy = evy+ (eay*dt);
            ey = ey + evy*dt;

            //desenha elementos;
            ctx.fillStyle="white";
            ctx.fillRect(p.x,p.y,30,30);

            ctx.fillStyle="red";
            ctx.fillRect(ex,ey,30,30);

            requestAnimationFrame(desenha);
            t0=t;
        }
        addEventListener("keydown",teclaPressionada);
        addEventListener("keyup",teclaSolta);
        function teclaPressionada(e)
        {
            //Controle de velocidades
            console.log(e.key);
            switch (e.key) 
            {
                case "ArrowUp":
                    p.ay = -V;
                    break;
                case "ArrowDown":
                    p.ay = +V;
                    break;
                case "ArrowLeft":
                    p.ax = -V;
                    break;
                case "ArrowRight":
                    p.ax = +V;
                    break;
            
                default:
                    break;
            }
        }
        function teclaSolta(e)
        {
            //Controle de velocidades
            console.log(e.key);
            switch (e.key) 
            {
                case "ArrowUp":
                    vy = 0;
                    ay = 0;
                    break;
                case "ArrowDown":
                    vy = 0;
                    ay = 0;
                    break;
                case "ArrowLeft":
                    vx = 0;
                    ax = 0;
                    break;
                case "ArrowRight":
                    vx = 0;
                    ax = 0;
                    break;
            
                default:
                    break;
            }
        }
    </script>
</body>
</html>